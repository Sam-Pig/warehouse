!function(i){var e={};function n(t){if(e[t])return e[t].exports;var s=e[t]={i:t,l:!1,exports:{}};return i[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=i,n.c=e,n.d=function(i,e,t){n.o(i,e)||Object.defineProperty(i,e,{configurable:!1,enumerable:!0,get:t})},n.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},n.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(e,"a",e),e},n.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},n.p="",n(n.s=13)}([function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEventHub()},bindEventHub:function(){var i=this;window.eventHub.on("SongAddOrSongList",function(e){!1===e.add?$(i.view.el).addClass("hide"):!0===e.add&&$(i.view.el).removeClass("hide")})}}).init({el:".searchOuter",template:'\n        <div class="searchInformation">\n                <svg class="icon music" aria-hidden="true"><use xlink:href="#icon-sousuo"></use></svg><input type="text" placeholder="搜索歌手、歌曲、专辑">\n            </div>\n            <div class="search clearfix"><span>西游记</span><span>士兵突击</span><span>谷村新司谷村新司谷村新司</span><span>粤语</span><span>武侠经典</span></div>\n        ',render:function(i){$(this.el).html(this.template)}},{})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEvents(),this.bindEventHub()},bindEvents:function(){var i=this;$(this.view.el).on("click","li",function(e){$(e.currentTarget).addClass("active").siblings(".active").removeClass("active"),$(e.currentTarget).hasClass("add")?(i.model.addOrList.add=!0,i.model.addOrList.list=!1,i.model.addOrList.myAlbum=!1):$(e.currentTarget).hasClass("list")?(i.model.addOrList.add=!1,i.model.addOrList.myAlbum=!1,i.model.addOrList.list=!0):$(e.currentTarget).hasClass("myAlbum")&&(i.model.addOrList.add=!1,i.model.addOrList.list=!1,i.model.addOrList.myAlbum=!0);var n=i.model.addOrList;window.eventHub.emit("SongAddOrSongList",n)})},bindEventHub:function(){window.eventHub.on("jumpDirectlyToAdd",function(){$(".add").addClass("active").siblings(".active").removeClass("active")}),window.eventHub.on("hideplayMusic",function(){$(".list").addClass("active").siblings(".active").removeClass("active")}),window.eventHub.on("updatedSongList",function(){$(".list").addClass("active").siblings(".active").removeClass("active")})}}).init({el:".topbar",template:'\n        <ol>\n            <li class="myAlbum active"><span>我的歌单</span></li>\n            <li class="list"><span>热歌榜</span></li>\n            <li class="add"><span>搜索</span></li>\n        </ol>\n        ',render:function(i){$(this.el).html(this.template)}},{addOrList:{add:!1,myAlbum:!0,list:!1}})},function(i,e,n){"use strict";({init:function(i,e){var n=this;this.view=i,this.model=e,this.view.render(),$(".uploadArea").on("click",function(){window.eventHub.emit("clearForm",{name:"",album:"",url:"",id:""})}),window.eventHub.on("hideplayMusic",function(){$(n.view.el).removeClass("hide")})}}).init({el:".uploadArea",template:'\n        <button id="pickfiles" class="pickfiles">文件大小不超过10M</button>\n        ',render:function(i){$(this.el)&&$(this.el).html(this.template)}},{})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEvents(),this.bindEventHub()},bindEvents:function(){var i=this;$(this.view.el).on("submit","form",function(e){e.preventDefault();var n={};["name","album","url","lyrics"].map(function(e){n[e]=$(i.view.el).find('[name="'+e+'"]').val()}),i.model.data.id&&$.trim(n.name)&&$.trim(n.album)?(n.id=i.model.data.id,i.model.updated(n),window.eventHub.emit("updated",n),i.view.reset()):!i.model.data.id&&$.trim(n.name)&&$.trim(n.album)&&i.model.saveSong(n).then(function(){n.id=i.model.data.id,i.model.data.id="",i.view.reset(),window.eventHub.emit("create",n)})})},bindEventHub:function(){var i=this;window.eventHub.on("upload",function(e){i.view.render(e)}),window.eventHub.on("select",function(e){i.model.data=e,i.view.render(i.model.data),$(i.view.el).parent().removeClass("hide"),$(".uploadArea").removeClass("hide")}),window.eventHub.on("activeButton",function(){$(".submitButton").removeAttr("disabled")}),window.eventHub.on("SongAddOrSongList",function(e){!0===e.add?($(i.view.el).parent().removeClass("hide"),$(".uploadArea").removeClass("hide")):!1===e.add&&($(i.view.el).parent().addClass("hide"),$(".uploadArea").addClass("hide"))}),window.eventHub.on("addOrAlbum",function(e){!0===e.songInformation&&!1===e.album?$(i.view.el).removeClass("hide"):!1===e.songInformation&&!0===e.album&&$(i.view.el).addClass("hide")}),window.eventHub.on("clearForm",function(e){i.view.reset(),i.model.data=e}),window.eventHub.on("hideplayMusic",function(){$(i.view.el).parent().addClass("hide"),$(".uploadArea").addClass("hide")})}}).init({el:".newSongsInformation",template:'\n    <form>\n        <div class="row">\n            <label>歌曲</label><input type="text" name="name" value="__name__">\n        </div>\n        <div class="row">\n            <label>专辑</label><input type="text" name="album" value="__album__">\n        </div>\n        <div class="row">\n            <label>外链</label><input type="text" value="__url__" name="url" readonly>\n        </div>\n        <div class="row">\n            <label class="lyrics">歌词</label><textarea name="lyrics">__lyrics__</textarea>\n        </div>\n        <div class="row">\n            <label></label><button type="submit" disabled="true" class="submitButton" id="up_load">保存</button>\n        </div>\n    </form>\n    ',render:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($(this.el)){var e=this.template;["name","url","album","lyrics"].map(function(n){e=e.replace("__"+n+"__",i[n]||"")}),$(this.el).html(e)}},reset:function(){this.render({})}},{data:{name:"",album:"",url:"",id:"",lyrics:""},saveSong:function(i){var e=this,n=new(AV.Object.extend("Song"));return n.set("name",i.name),n.set("album",i.album),n.set("url",i.url),n.set("lyrics",i.lyrics),n.save().then(function(i){var n=i.id,t=i.attributes;Object.assign(e.data,{id:n,name:t.name,url:t.url,lyrics:t.lyrics})},function(i){console.error(i)})},updated:function(i){var e=AV.Object.createWithoutData("Song",i.id);e.set("name",i.name),e.set("album",i.album),e.set("lyrics",i.lyrics),e.save()}})},function(i,e,n){"use strict";({init:function(i,e){var n=this;this.view=i,this.model=e,this.model.getAllSongs().then(function(){n.view.render(n.model.data)}),this.bindEventHub(),this.bindEvent()},bindEvent:function(){var i=this;$(this.view.el).on("click","div.el",function(e){var n=e.currentTarget.getAttribute("title"),t=i.model.getCurrentAlbum(n);console.log(t);var s={id:t[0].id,name:t[0].name,url:t[0].url,album:t[0].album,lyrics:t[0].lyrics};window.eventHub.emit("updatedSongList",s),$(i.view.el).addClass("hide")}),$(this.view.el).on("click","svg",function(e){for(var n=$(e.currentTarget).parent().parent()[0].getAttribute("data-song-id"),t=i.model.data.songs,s={},a=0;a<t.length;a++)t[a].id===n&&(s=t[a]);console.log(s),window.eventHub.emit("showplayMusic",s),window.eventHub.emit("playDirectly"),$(".pageOuterInMobile")&&$(".pageOuterInMobile").addClass("hide")})},bindEventHub:function(){var i=this;window.eventHub.on("SongAddOrSongList",function(e){!1===e.myAlbum?$(i.view.el).addClass("hide"):!0===e.myAlbum&&$(i.view.el).removeClass("hide")}),window.eventHub.on("hideplayMusic",function(){$(i.view.el).addClass("hide")})}}).init({el:".album",template:'\n        <p><span>我的歌单</span></p>\n        <div class="mobileOuter clearfix">\n            <div class="xiyouji el" title="西游记"><img src="http://p1.music.126.net/vmiw_qldWKuPXeKxEyxk2Q==/49478023264173.jpg?param=180y180"><figcaption>大师兄，师傅又双叒叕被妖怪抓走啦~~~~~~经典西游</figcaption></div>\n            <div class="shibintuji el" title="士兵突击"><img src="http://p1.music.126.net/vY3naGuvGQW6Xk0JRKXxtA==/6002233976603537.jpg?param=180y180"><figcaption>光荣在于平淡，艰巨在于漫长-士兵突击</figcaption></div>\n            <div class="gucunxinsi el" title="谷村新司"><img src="http://p1.music.126.net/USNapWbUW2BBd_ccCHzuWw==/734473767366516.jpg?param=180y180"><figcaption>谷村新司</figcaption></div>\n            <div class="yueyu el" title="粤语"><img src="http://p1.music.126.net/1HD55undHb-PgFsO5BDk5g==/17829680556370235.jpg?param=180y180"><figcaption>那些年我们听过的粤语</figcaption></div>\n            <div class="wuxia el" title="武侠"><img src="http://p1.music.126.net/qHKvdeYzTqIOxcGKnrfaPQ==/72567767449767.jpg?param=180y180"><figcaption>武侠经典</figcaption></div>\n        </div>\n        <div class="recentSongs">\n            <ul class="recentSongsList"></ul>\n        </div>\n        ',render:function(i){$(this.el).html(this.template);i.songs.map(function(i){var e=i.name,n=i.album,t=$('<li class="test"></p><div class="eachSong"><p>'+e+'</p><div class="hot"><svg class="icon music" aria-hidden="true"><use xlink:href="#icon-quxiaoremen"></use></svg><span>'+n+'</span></div></div><a class="playButton" href="#"><svg class="icon music" aria-hidden="true"><use xlink:href="#icon-iconset0481"></use></svg></a></li>').attr("data-song-id",i.id)[0];$(".recentSongs").find("ul").append(t)})}},{data:{songs:{}},getCurrentAlbum:function(i){return console.log(this.data.songs),this.data.songs.filter(function(e){return e.album===i})},getAllSongs:function(){var i=this;return new AV.Query("Song").find().then(function(e){return i.data.songs=e.map(function(i){return{id:i.id,name:i.attributes.name,url:i.attributes.url,album:i.attributes.album,lyrics:i.attributes.lyrics}}),i.data.songs})}})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEvents()},bindEvents:function(){$(this.view.el).on("click","span.back",function(i){window.eventHub.emit("hideplayMusic",null)})}}).init({el:".header",template:'\n        <span class="back">←</span>网易云音乐<span>✕</span><span>☐</span><span>一</span>\n        ',render:function(i){$(this.el).html(this.template)}},{})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.bindEventHub(),this.bindEvents()},bindEvents:function(){var i=this;$(this.view.el).on("click","span.back",function(){window.eventHub.emit("hideplayMusic",null),$(".pageOuterInMobile")&&$(".pageOuterInMobile").removeClass("hide")}),$(this.view.el).on("click","svg.play",function(e){!0===i.model.end&&window.eventHub.emit("showplayMusic",i.model.currentaudio),$("audio")[0].play(),$(e.currentTarget).addClass("hide").siblings(".stop").removeClass("hide"),$(".disc").removeClass("paused"),$("div.needle").removeClass("paused"),i.model.end=!1}),$(this.view.el).on("click","svg.stop",function(i){$("audio")[0].pause(),$(i.currentTarget).addClass("hide").siblings(".play").removeClass("hide"),$(".disc").addClass("paused"),$("div.needle").addClass("paused")})},bindEventHub:function(){var i=this;window.eventHub.on("showplayMusic",function(e){i.model.currentaudio=e;var n=i.getClassName(i.model.currentaudio);i.view.show(),i.view.render(i.model.currentaudio),i.getAlbumToShowImage(i.model.currentaudio);var t=i.model.getLyricsHash();i.view.showLyrics(t,n);var s=0,a=$(n+" .lyrics")[0].getBoundingClientRect().top+$(n+" .lyrics")[0].offsetHeight/2,d=$(".lyrics p:nth-child(1)")[0].offsetHeight;$("audio")[0].ontimeupdate=function(){var i=Math.floor($("audio")[0].currentTime),e=n+" .lyric_"+i;if($(".lyric_"+i).length>0){if($(".lyric_"+i).addClass("lyriclight").siblings().removeClass("lyriclight"),!($(e)[0].getBoundingClientRect().top>a&&$(e).hasClass("played")))return;s+=1,$(".lyric_"+i).addClass("lyriclight"),$($(e)[0]).parent().css("transform","translateY(-"+s*d+"px)"),$(e).removeClass("played")}},$(i.view.el).find("audio")[0].onended=function(){$(".disc").addClass("paused"),$("div.needle").addClass("paused"),$("svg.stop").addClass("hide").siblings(".play").removeClass("hide"),i.model.end=!0}}),window.eventHub.on("hideplayMusic",function(){i.view.hide()}),window.eventHub.on("playDirectly",function(){$("audio")[0].play(),$("svg.play").addClass("hide").siblings(".stop").removeClass("hide")})},getAlbumToShowImage:function(i){switch(i.album){case"西游记":$(".xiyouji").removeClass("hide").siblings().addClass("hide");break;case"士兵突击":$(".shibintuji").removeClass("hide").siblings().addClass("hide");break;case"谷村新司":$(".gucunxinsi").removeClass("hide").siblings().addClass("hide");break;case"粤语":$(".yueyu").removeClass("hide").siblings().addClass("hide");break;case"武侠":$(".wuxia").removeClass("hide").siblings().addClass("hide");break;default:return}},getClassName:function(i){switch(i.album){case"西游记":return".xiyouji";case"士兵突击":return".shibintuji";case"谷村新司":return".gucunxinsi";case"粤语":return".yueyu";case"武侠":return".wuxia";default:return}}}).init({el:".playInterface",template:'\n        <div class="xiyouji hide">\n            <div class="needle"></div>\n            <img src="http://p1.music.126.net/vmiw_qldWKuPXeKxEyxk2Q==/49478023264173.jpg?param=180y180">\n            <span class="back">\n                <svg class="icon music" aria-hidden="true">\n                <use xlink:href="#icon-fanhui"></use>\n                </svg>\n            </span>\n            <div class="startPlaying" id="startPlaying">\n                <div class="CD"><div class="disc" style="background: url(//p1.music.126.net/vmiw_qldWKuPXeKxEyxk2Q==/49478023264173.jpg?param=180y180);background-size: 60%;background-position: center;background-repeat: no-repeat;">\n                    <svg class="icon play hide" aria-hidden="true">\n                    <use xlink:href="#icon-bofang1"></use>\n                    </svg>\n                    <svg class="icon stop" aria-hidden="true">\n                    <use xlink:href="#icon-zanting"></use>\n                    </svg>\n                </div></div>\n                <div class="lyricsOuter"><div class="lyrics"></div></div>\n                <div class="playInformation"><p>{{name}}</p><p>{{album}}</p></div>\n            </div>\n            \n        </div>\n        <div class="shibintuji hide">\n            <div class="needle"></div>\n            <img src="http://p1.music.126.net/vY3naGuvGQW6Xk0JRKXxtA==/6002233976603537.jpg?param=180y180">\n            <span class="back">\n                <svg class="icon music" aria-hidden="true">\n                <use xlink:href="#icon-fanhui"></use>\n                </svg>\n            </span>\n            <div class="startPlaying" id="startPlaying">\n                <div class="CD"><div class="disc" style="background: url(//p1.music.126.net/vY3naGuvGQW6Xk0JRKXxtA==/6002233976603537.jpg?param=180y180);background-size: 60%;background-position: center;background-repeat: no-repeat;">\n                    <svg class="icon play hide" aria-hidden="true">\n                    <use xlink:href="#icon-bofang1"></use>\n                    </svg>\n                    <svg class="icon stop" aria-hidden="true">\n                    <use xlink:href="#icon-zanting"></use>\n                    </svg>\n                </div></div>\n                <div class="lyricsOuter"><div class="lyrics"></div></div>\n                <div class="playInformation"><p>{{name}}</p><p>{{album}}</p></div>\n            </div>\n        </div>\n        <div class="gucunxinsi hide">\n            <div class="needle"></div>\n            <img src="http://p1.music.126.net/USNapWbUW2BBd_ccCHzuWw==/734473767366516.jpg?param=180y180">\n            <span class="back">\n                <svg class="icon music" aria-hidden="true">\n                <use xlink:href="#icon-fanhui"></use>\n                </svg>\n            </span>\n            <div class="startPlaying" id="startPlaying">\n                <div class="CD"><div class="disc" style="background: url(//p1.music.126.net/USNapWbUW2BBd_ccCHzuWw==/734473767366516.jpg?param=180y180);background-size: 60%;background-position: center;background-repeat: no-repeat;">\n                <svg class="icon play hide" aria-hidden="true">\n                <use xlink:href="#icon-bofang1"></use>\n                </svg>\n                <svg class="icon stop" aria-hidden="true">\n                <use xlink:href="#icon-zanting"></use>\n                </svg>\n                </div></div>\n                <div class="lyricsOuter"><div class="lyrics"></div></div>\n                <div class="playInformation"><p>{{name}}</p><p>{{album}}</p></div>\n            </div>\n        </div>\n        <div class="yueyu hide">\n            <div class="needle"></div>\n            <img src="http://p1.music.126.net/1HD55undHb-PgFsO5BDk5g==/17829680556370235.jpg?param=180y180">\n            <span class="back">\n                <svg class="icon music" aria-hidden="true">\n                <use xlink:href="#icon-fanhui"></use>\n                </svg>\n            </span>\n            <div class="startPlaying" id="startPlaying">\n                <div class="CD"><div class="disc" style="background: url(//p1.music.126.net/1HD55undHb-PgFsO5BDk5g==/17829680556370235.jpg?param=180y180);background-size: 60%;background-position: center;background-repeat: no-repeat;">\n                <svg class="icon play hide" aria-hidden="true">\n                <use xlink:href="#icon-bofang1"></use>\n                </svg>\n                <svg class="icon stop" aria-hidden="true">\n                <use xlink:href="#icon-zanting"></use>\n                </svg>\n                </div></div>\n                <div class="lyricsOuter"><div class="lyrics"></div></div>\n                <div class="playInformation"><p>{{name}}</p><p>{{album}}</p></div>\n            </div>\n        </div>\n        <div class="wuxia hide">\n        <div class="needle"></div>\n        <img src="http://p1.music.126.net/qHKvdeYzTqIOxcGKnrfaPQ==/72567767449767.jpg?param=180y180">\n            <span class="back">\n                <svg class="icon music" aria-hidden="true">\n                <use xlink:href="#icon-fanhui"></use>\n                </svg>\n            </span>\n            <div class="startPlaying" id="startPlaying">\n                <div class="CD"><div class="disc" style="background: url(//p1.music.126.net/qHKvdeYzTqIOxcGKnrfaPQ==/72567767449767.jpg?param=180y180);background-size: 60%;background-position: center;background-repeat: no-repeat;">\n                <svg class="icon play hide" aria-hidden="true">\n                <use xlink:href="#icon-bofang1"></use>\n                </svg>\n                <svg class="icon stop" aria-hidden="true">\n                <use xlink:href="#icon-zanting"></use>\n                </svg>\n                </div></div>\n                <div class="lyricsOuter"><div class="lyrics"></div></div>\n                <div class="playInformation"><p>{{name}}</p><p>{{album}}</p></div>\n            </div>\n        </div>\n        <audio src="{{audioSrc}}" controls>\n        </audio>',render:function(i){var e=this.template;i.url;e=e.replace("{{audioSrc}}",i.url).replace(/{{name}}/g,i.name).replace(/{{album}}/g,i.album),$(this.el).html(e)},show:function(){$(this.el).removeClass("hide")},hide:function(){$(this.el).addClass("hide")},showLyrics:function(i,e){var n=e+" .lyrics";if(i){var t=i.map(function(i,e){return $('\n                <p class="lyric_'+e+'  played">'+i+"</p>")});$(n).empty(),t.map(function(i){$(n).append(i)})}else $(n).empty(),$(n).append($("<p>纯音乐无歌词</p>"))}},{currentaudio:{},end:!1,getLyricsHash:function(){if(this.currentaudio.lyrics){var i=[];return this.currentaudio.lyrics.split("\n").forEach(function(e){var n=e.split("]")[1],t=e.match(/\[\d*:\d*((\.|\:)\d*)*\]/g),s=Number(String(t[0].match(/\[\d*/i)).slice(1)),a=Number(String(t[0].match(/\:\d*/i)).slice(1));i[60*s+a]=n}),i}}})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.bindEventHub()},bindEventHub:function(){var i=this;window.eventHub.on("beforeUpload",function(e){i.view.render(e)}),window.eventHub.on("afterUpload",function(e){i.view.render(e)})}}).init({el:".site-loading",render:function(i){!0===i?$(this.el).addClass("hide"):!1===i&&$(this.el).removeClass("hide")}},{})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEvent()},bindEvent:function(){var i=this;$(this.view.el).on("click","li",function(e){$(e.currentTarget).addClass("active").siblings(".active").removeClass("active"),$(e.currentTarget).hasClass("songInformation")?(i.model.addOrAlbum.songInformation=!0,i.model.addOrAlbum.album=!1):$(e.currentTarget).hasClass("computerAlbum")&&(i.model.addOrAlbum.songInformation=!1,i.model.addOrAlbum.album=!0);var n=i.model.addOrAlbum;window.eventHub.emit("addOrAlbum",n)})}}).init({el:".computerNav",template:'\n        <ul>\n            <li class="computerAlbum active"><span>我的音乐</span></li>\n            <li class="songInformation"><span>歌曲信息</span></li>\n        </ul>\n        ',render:function(i){$(this.el).html(this.template)}},{addOrAlbum:{songInformation:!1,album:!0}})},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEventHub(),this.bindEvent()},bindEvent:function(){var i=this;$(this.view.el).on("click","div",function(e){var n=e.currentTarget.getAttribute("title");i.model.getCurrentAlbum(n).then(function(i){var e={id:i[0].id,name:i[0].attributes.name,url:i[0].attributes.url,album:i[0].attributes.album,lyrics:i[0].attributes.lyrics};window.eventHub.emit("updatedSongList",e)})})},bindEventHub:function(){var i=this;window.eventHub.on("addOrAlbum",function(e){!0===e.songInformation&&!1===e.album?$(i.view.el).addClass("hide"):!1===e.songInformation&&!0===e.album&&$(i.view.el).removeClass("hide")})}}).init({el:".computerAlbum",template:'\n        <div class="xiyouji" title="西游记"><img src="http://p1.music.126.net/vmiw_qldWKuPXeKxEyxk2Q==/49478023264173.jpg?param=180y180"><figcaption>大师兄，师傅又双叒叕被妖怪抓走啦~~~~~~经典西游</figcaption></div>\n        <div class="shibintuji" title="士兵突击"><img src="http://p1.music.126.net/vY3naGuvGQW6Xk0JRKXxtA==/6002233976603537.jpg?param=180y180"><figcaption>光荣在于平淡，艰巨在于漫长-士兵突击</figcaption></div>\n        <div class="gucunxinsi" title="谷村新司"><img src="http://p1.music.126.net/USNapWbUW2BBd_ccCHzuWw==/734473767366516.jpg?param=180y180"><figcaption>谷村新司</figcaption></div>\n        <div class="yueyu" title="粤语"><img src="http://p1.music.126.net/1HD55undHb-PgFsO5BDk5g==/17829680556370235.jpg?param=180y180"><figcaption>那些年我们听过的粤语</figcaption></div>\n        <div class="wuxia" title="武侠"><img src="http://p1.music.126.net/qHKvdeYzTqIOxcGKnrfaPQ==/72567767449767.jpg?param=180y180"><figcaption>武侠经典</figcaption></div>\n        ',render:function(i){$(this.el).html(this.template)}},{getCurrentAlbum:function(i){return new AV.Query("Song").find().then(function(e){return e.filter(function(e){return e.attributes.album===i})})}})},function(i,e,n){"use strict";({init:function(i,e){var n=this;this.view=i,this.model=e,this.model.getAllSongs().then(function(){n.view.render(n.model.data,0)}),this.bindEvents(),this.bindEventHub()},bindEvents:function(){var i=this;$(this.view.el).on("click","li",function(e){i.view.activationSong(e.currentTarget);for(var n=e.currentTarget.getAttribute("data-song-id"),t=void 0,s=i.model.data.songs,a=0;a<s.length;a++)s[a].id===n&&(t=s[a]);var d=JSON.stringify(t),l=JSON.parse(d);window.eventHub.emit("select",l),window.eventHub.emit("activeButton",null),$(i.view.el).parent().hasClass("siderbar")||$(i.view.el).parent().addClass("hide"),window.eventHub.emit("jumpDirectlyToAdd",null)}),$(this.view.el).on("click","svg",function(e){for(var n=$(e.currentTarget).parent().parent()[0].getAttribute("data-song-id"),t=i.model.data.songs,s={},a=0;a<t.length;a++)t[a].id===n&&(s=t[a]);window.eventHub.emit("showplayMusic",s),window.eventHub.emit("playDirectly"),$(".pageOuterInMobile")&&$(".pageOuterInMobile").addClass("hide"),console.log($(i.view.el).parent())})},bindEventHub:function(){var i=this;window.eventHub.on("upload",function(e){i.view.clearActive()}),window.eventHub.on("create",function(e){var n=e;i.model.data.songs.push(n),i.view.render(i.model.data,0)}),window.eventHub.on("updated",function(e){i.model.data.songs.map(function(i){i.id===e.id&&Object.assign(i,e)}),i.view.render(i.model.data,0)}),window.eventHub.on("zoomOutOrIn",function(){$(i.view.el).parent().hasClass("hide")?$(i.view.el).parent().removeClass("hide"):$(i.view.el).parent().addClass("hide"),$(i.view.el).hasClass("hide")?($(i.view.el).removeClass("hide"),$(".uploadArea").removeClass("hide"),$(".myMusic").removeClass("hide"),$(".songList li").removeClass("hide")):($(".myMusic").addClass("hide"),$(i.view.el).addClass("hide"),$(i.view.el).siblings(".uploadArea").addClass("hide"),$(".songList li").addClass("hide"))}),window.eventHub.on("SongAddOrSongList",function(e){!1===e.list?$(i.view.el).parent().addClass("hide"):!0===e.list&&$(i.view.el).parent().removeClass("hide")}),window.eventHub.on("hideplayMusic",function(){$(i.view.el).parent().removeClass("hide")}),window.eventHub.on("updatedSongList",function(e){$(i.view.el).parent().removeClass("hide");var n=e;i.model.data.songs.splice(0,i.model.data.songs.length),i.model.data.songs.push(n),console.log(i.model.data.songs),$(i.el).find("ul").empty(),i.view.render(i.model.data,0)})}}).init({el:".songListOuter",template:'<ul class="songList"></ul>',render:function(i,e){var n=$(this.el);n.html(this.template);i.songs.map(function(i){var t=i.name,s=i.album;e+=1;var a=$('<li class="test"><p class="serialNumber"><span>'+e+'<span></p><div class="eachSong"><p>'+t+'</p><div class="hot"><svg class="icon music" aria-hidden="true"><use xlink:href="#icon-quxiaoremen"></use></svg><span>'+s+'</span></div></div><a class="playButton" href="#"><svg class="icon music" aria-hidden="true"><use xlink:href="#icon-iconset0481"></use></svg></a></li>').attr("data-song-id",i.id)[0];n.find("ul").append(a)})},activationSong:function(i){$(i).addClass("active").siblings(".active").removeClass("active")},clearActive:function(){$(this.el).find(".active").removeClass("active")}},{data:{songs:[]},getAllSongs:function(){var i=this;return new AV.Query("Song").find().then(function(e){return i.data.songs=e.map(function(i){return{id:i.id,name:i.attributes.name,url:i.attributes.url,album:i.attributes.album,lyrics:i.attributes.lyrics}}),i.data.songs})}})},function(i,e,n){"use strict";window.eventHub={events:{},emit:function(i,e){for(var n in this.events){if(n===i)this.events[n].map(function(i){i.call(void 0,e)})}},on:function(i,e){void 0===this.events[i]&&(this.events[i]=[]),this.events[i].push(e)}}},function(i,e,n){"use strict";({init:function(i,e){this.view=i,this.model=e,this.view.render(),this.bindEvents()},bindEvents:function(){$(this.view.el).on("click","svg",function(i){window.eventHub.emit("zoomOutOrIn",null)})}}).init({el:".menu",template:'<svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"></use></svg>',render:function(i){$(this.el).html(this.template)}},{})},function(i,e,n){"use strict";t(n(12)),t(n(11)),t(n(10)),t(n(9)),t(n(8)),t(n(7)),t(n(6)),t(n(5)),t(n(4)),t(n(3)),t(n(2)),t(n(1)),t(n(0));function t(i){return i&&i.__esModule?i:{default:i}}}]);